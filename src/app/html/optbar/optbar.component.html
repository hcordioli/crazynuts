<div class="html-optbar">
	<form class="wrap" (ngSubmit)="onSubmit(false)" novalidate>
		<div class="search">
			<label>
				<ng2-completer (input)="onCompleterInput($event)" (focus)="onCompleterFocus($event)" [selectOnFocus]="false" (blur)="onCompleterBlur($event)" name="busca" (selected)="onCompleterSelected($event)" [(initialValue)]="vars.mdl.busca.init" [autoMatch]="true" [inputClass]="vars.mdl.busca.cls" [autofocus]="true" [textSearching]="null" [textNoResults]="null" [inputName]="'busca'" [placeholder]="vars.mdl.busca.placeholder" [(ngModel)]="vars.mdl.busca.val" [datasource]="regions" [clearUnselected]="false" [minSearchLength]="3" [fieldTabindex]="1" [selectOnClick]="true" [openOnClick]="true" [matchClass]="'completer-highlighted-word'"></ng2-completer>
				<span class="icon"></span>
			</label>
		</div>
		<div class="opt">
			<div class="dateRange">
				<label class="wrap" (keydown.Tab)="nextInput($event)">
					<input type="text" name="daterangeInput" daterangepicker [options]="options" (blur)="blurDate($event)" (selected)="selectedDate($event)" />
					<div [attr.class]="'checkin' + ((vars.mdl.entrada.val || '').length ? ' touched' : '')">
						<span class="txt" [textContent]="vars.mdl.entrada.txt || '&nbsp;'"></span>
						<span class="label"><span>Check-in</span></span>
					</div>
					<div [attr.class]="'checkout' + ((vars.mdl.saida.val || '').length ? ' touched' : '')">
						<span class="txt" [textContent]="vars.mdl.saida.txt || '&nbsp;'"></span>
						<span class="label"><span>Check-out</span></span>
					</div>
					<div id="pickMe" [attr.class]="'topArrow' + (!vars.mdl.saida.val.length || show.calendarRight ? ' rightAlign': '')"></div>
				</label>
			</div>
			<div #rooms class="rooms">
				<div class="quartos" (click)="onClick($event.target)">
					<span class="label">
						<span class="icon-room">
							<img [attr.src]="vars.icons.base + vars.icons.room" alt="Q">
						</span>
						<span class="val" [textContent]="vars.mdl.room.total"></span>
						<span class="pessoas">
						<span class="icon-people">
							<img [attr.src]="vars.icons.base + vars.icons.people" alt="P">
						</span>
						<span class="val" [textContent]="vars.mdl.room.people.total"></span>
					</span>
					</span>
				</div>
				<div [attr.class]="'room' + (show.rooms ? ' show topArrow rightAlign' : '')">
					<div class="header">
						<a (click)="show.room = n" [attr.class]="'btn' + (show.room === n ? ' bgc c1 active':'')" *ngFor="let p of vars.mdl.room.people.list; let n = index;">
											<span>
												Quarto {{n + 1}}
											</span>
										</a>
						<span [hidden]="vars.mdl.room.total <= 1" class="icon-remove remove" (click)="rmRoom(show.room)">
											<img [attr.src]="vars.icons.base + vars.icons.remove" alt="&times;">
										</span>
					</div>
					<div class="content" #quartosWrap>
						<div [attr.class]="'room' + (n + 1) + ' ' + (show.room > n ? 'alignL' : (show.room === n ? 'alignC' : 'alignR'))" *ngFor="let p of vars.mdl.room.people.list; let n = index;">
							<div class="campos wrap">
								<div class="people">
									<label>
										<span>Adultos (18 anos)</span>
										<input (focus)="show.room = n; quartosWrap.scrollLeft = 0;" type="number" placeholder="" min="1" max="{{vars.mdl.room.people.limit}}" id="adults[{{p.name}}]" name="adults[{{p.name}}]" [ngModel]="p.more18" (ngModelChange)="changeAdult(n, $event, 'adults[' + p.name + ']')">
									</label>
									<label>
										<span>Crianças (0-17 anos)</span>
										<input (focus)="show.room = n" min="0" max="{{vars.mdl.room.people.limit}}" step="1" type="number" id="children[{{p.name}}]" name="children[{{p.name}}]" [ngModel]="p.less18.total" (ngModelChange)="changeChild(n, $event, 'children[' + p.name + ']')">
									</label>
								</div>
								<div class="children wrap">
									<label *ngFor="let pp of p.less18.list; let nn = index">
										<span>Criança {{ nn + 1 }}</span>
										<input (focus)="show.room = n" type="number" max="17" min="0" placeholder="" name="childage[{{p.name}}][{{nn}}]" [(ngModel)]="pp.age">
									</label>
								</div>
							</div>
						</div>
					</div>
					<a [hidden]="vars.mdl.room.total >= vars.mdl.room.limit" [attr.class]="'add bgc c1' + (vars.mdl.room.disabled ? ' disabled' : '')" href="javascript:;" (click)="addRoom(vars.mdl.room.total)">Adicionar Quarto</a>
				</div>
			</div>
			<div class="submit">
				<input class="bgc c1" type="submit" value="Busca">
			</div>
		</div>
		<div class="eanKeys" *ngIf="show.keys">
			<input placeholder="eanCID" name="cid" [(ngModel)]="vars.mdl.keys.cid">
			<input placeholder="eanAPIKey" name="api" [(ngModel)]="vars.mdl.keys.api">
			<input placeholder="eanSharedSecret" name="secret" [(ngModel)]="vars.mdl.keys.secret">
		</div>
	</form>
	<div class="sub" *ngIf="vars.loadHotel">
		<span class="txt">{{vars.mdl.busca.lastVal}}: {{vars.hotelList.properties}} propriedade{{vars.hotelList.properties > 1 ? 's' : ''}}</span>
	</div>
</div>
